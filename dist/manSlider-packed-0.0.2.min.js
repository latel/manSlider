/*! manSlider-0.0.2.min.js, 2015/05/24*/

!function(a){"use strict";var b,c="0.0.1",d=window.LocalEvent,e=Object.prototype.hasOwnProperty,f=Object.prototype.toString,g=Array.prototype.slice,h=/\/$/,i=function(a,b){this._maxListeners=0,this._events={newListener:[],removeListener:[]},this._mode="boolean"==typeof a?a:"negative"===a?!1:!0,this._onceSignal=!0,"Object"===i.type(b)&&this.listensTo(b)};b=i.prototype,b._getEvents=function(){return this._events},b._getListenersAsObject=function(a,b){var c,d=this._getEvents(),f=i.type(a),g={};if("String"===f&&(a=a.replace(h,""),(g[a]=d[a])||this._mode!==!1&&(g[a]=d[a]=[])||delete g[a],b!==!1&&(a=new RegExp("^"+a+"/",c),f="RegExp")),"RegExp"===f)for(c in d)e.call(d,c)&&!g[c]&&a.test(c)&&(g[c]=this._events[c]);return g},b._getListenersAsFlat=function(a,b){var c,d,f,g=this._getListenersAsObject(a,b),h={};for(f in g)if(e.call(g,f))for(h[f]=[],c=0,d=g[f].length;d>c;c++)h[f].push(g[f][c].listener);return h},b.setMaxListeners=function(a){return"Number"===i.type(a)&&a>1&&(this._maxListeners=a),this},b.setOnceSignal=function(a){return this._onceSignal=a,this},b.getOnceSignal=function(){return this._onceSignal},b.defineEvent=function(){var a,b,c,d,e,f=this._getEvents();for(a=0,c=arguments.length;c>a;a++)switch(e=arguments[a],i.type(e)){case"String":!f[e]&&(f[e]=[]);break;case"Array":for(b=0,d=e.length;d>b;b++)this.defineEvent(e[b])}return this},b.defineEvents=b.defineEvent,b.removeEvent=function(){var a,b,c,d,f,g,j=this._getEvents();for(c=0,f=arguments.length;f>c;c++)switch(a=arguments[c],b=i.type(a)){case"String":a=a.replace(h,""),delete j[a],a=new RegExp("^"+a+"/","i");case"RegExp":for(d in j)e.call(j,d)&&a.test(d)&&delete j[d];break;case"Array":for(d=0,g=a.length;g>d;d++)this.removeEvent(a[d])}return this},b.removeEvents=b.removeEvent,b.removeAllEvent=function(){return this._events={},this},b.listenTo=function(a,b){var c,d,f,g;if(f="Object"===i.type(b),!f&&"Function"!==i.type(b))return this;c=this._getEvents(),d=this._getListenersAsFlat(a,!1);for(g in d)e.call(d,g)&&(0===this._maxListeners?1:c[g].length<this._maxListeners)&&-1===i.indexOf(d[g],f?b.listener:b)&&(c[g].push(f?b:{listener:b,once:!1}),this.trigger("newListener",g,c[g].slice(-1)[0].listener));return this},b.addListener=b.listenTo,b.on=b.listenTo,b.listenToOnce=function(a,b){return"Function"!==i.type(b)?this:this.listenTo(a,{listener:b,once:!0})},b.once=b.listenToOnce,b.listensTo=function(){},b.addListeners=b.listensTo,b.removeListener=function(a,b){var c,d,b,f,g;if("Function"!==i.type(b))return this;c=this._getEvents(),d=this._getListenersAsFlat(a);for(f in d)e.call(d,f)&&-1!==(g=i.indexOf(d[f],b))&&(b=c[f][g],this.trigger("removeListener",f,b),c[f].splice(g,1));return this},b.off=b.removeListener,b.un=b.removeListener,b.die=b.removeListener,b.removeListeners=function(){},b.trigger=function(a,b){var c,d,f,h,b="Array"===i.type(b)?b:g.call(arguments).slice(1),j=this._getListenersAsObject(a,"rw");for(d in j)if(e.call(j,d)&&i.type("Array"===j[d]))for(h=j[d].length;h--;)c=j[d][h],f=c.listener.apply(this,b||[]),(c.once===!0||f===this._onceSignal)&&this.removeListener(d,c.listener)},b.getListeners=function(){this._getListenersAsObject()},i.type=function(a){return void 0===a?"Undefined":f.call(a).slice(8,-1)||null},i.indexOf=function(){return Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){var c=0,d=a.length;if("Array"!==i.type(a))return-1;for(;d>c;c++)if(a[c]===b)return c;return-1}}(),i.noConflict=function(){a.LocalEvent===i&&(a.LocalEvent=d)},i.version=c,"function"==typeof define?define(function(){return i}):"object"==typeof exports&&(exports.LocalEvent=i),a.LocalEvent=i}(this),function(a,b){if("undefined"==typeof a)throw"jQuery is required by manSlider";if("undefined"==typeof b)throw"LocalEvent is required by manSlider";var c="manSlider-",d=new RegExp("^"+c.replace("-","")),e=Object.prototype.toString,f=function(a){return"[object Array]"===e.call(a)?!0:!1},g=function(a,b,c){var d;if(!f(b))return-1;for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(b[c]===a)return c;return-1},h=function(c){return b.call(this),!c.$view instanceof a?!1:(this.__$view=c.$view,this.__theme=c.theme,this.__min=c.min,this.__max=c.max,this.__orientation=c.orientation,this.__range=c.range,this.__step=c.step,this.value=c.value,this.slide(c.slide),this.change(c.change),this.__states={eventsBind:!1},this.__construct(),this.__render(this.value,!0),void this.enable())};h.poto=h.prototype=new b,h.poto.__construct=function(){var a,b,d;return this.__$view.empty(),a=c.replace(/-$/,"")+" ",a+=c+this.__theme+" ",a+=c+this.__orientation+" ",this.__$view.addClass(a),b=c+"handle ",b+=c+"state-default ",this.__$view.append('<span class="'+b+'"></span>'),this.__$handle=this.__$view.find("span"),d=c+"range ",this.__range&&(d+=c+"range-"+this.__range+" "),this.__$view.append('<div class="'+d+'"></div>'),this.__$range=this.__$view.find("div"),this.__range||this.__$range.css("display","none"),this},h.poto.__bindEvents=function(){var b=this;return a(document).bind("mouseup.manslider",function(){a(document).unbind("mousemove.manslider")}),this.__$view.bind("mousedown.manSlider",function(c){1===c.which&&(a(document).bind("mousemove.manslider",function(a){h.__sliderMouseDown.call(b,a),b.trigger("slide")}),h.__sliderMouseDown.call(b,c))}),this},h.poto.__unBindEvents=function(){return this.__$view.unbind("mousedown.manSlider"),this.__$handle.unbind("mousedown.manSlider"),a(document).unbind("mousemove.manslider").unbind("mouseup.manslider"),this},h.poto.__render=function(a,b){var c;c=b?100*(+a-this.__min)/(this.__max-this.__min):a,"max"===this.__range?"horizontal"===this.__orientation?this.__$range.css("width",100-c+"%"):this.__$range.css("height",100-c+"%"):"horizontal"===this.__orientation?this.__$range.css("width",c+"%"):this.__$range.css("height",c+"%"),"horizontal"===this.__orientation?this.__$handle.css("left",c+"%"):this.__$handle.css("bottom",c+"%")},h.poto.get=function(){return this.trigger("getValue",this.value),this.value},h.poto.getMax=function(){return this.trigger("getMaxValue",this.__max),this.__max},h.poto.getMin=function(){return this.trigger("getMinValue",this.__min),this.__min},h.poto.set=function(a){var b=this.value;return"number"==typeof a&&(a<this.__min?a=this.__min:a>this.__max?a=this.__max:"number"==typeof this.__step&&0!==this.__step&&(a=this.__min+this.__step*+((a-this.__min)/this.__step).toFixed()),a!==b&&(this.value=a,this.__render(a,!0),!0===donotTrigger&&this.trigger("change",a))),this},h.poto.dom=function(a){return a?this.__$view[0]:this.__$view},h.poto.destory=function(){var b=this;this.__$view.empty(),a.each(this.__$view.attr("class").split(" "),function(a,c){d.test(c)&&b.__$view.removeClass(c)}),this.__unBindEvents(),this.trigger("destory",this.__$view)},h.poto.enable=function(){return this.__states.eventsBind===!1&&(this.__bindEvents(),this.__states.bindEvents=!0,this.trigger("eventsBind")),this},h.poto.disable=function(){return this.__unBindEvents(),this.__states.bindEvents=!1,this.trigger("eventsUnbind"),this},h.poto.change=function(a){return this.listenTo("change",a),this},h.poto.slide=function(a){return this.listenTo("slide",a),this},h.poto.max=function(a){return a>this.__min&&(this.value>a&&(this.value=a),this.__max=a,this.__render(this.value,!0)),this},h.poto.min=function(a){return a<this.__max&&(this.value<a&&(this.value=a),this.__min=a,this.__render(this.value,!0)),this},h.__sliderMouseDown=function(a){var b,c,d=this.value,e=this.__$view.offset(),f=this.__$view.width(),g=this.__$view.height(),h={top:a.pageY-e.top,left:a.pageX-e.left};c="horizontal"===this.__orientation?100*h.left/f:100*(1-h.top/g),c=Math.max(0,c),c=Math.min(100,c),b=this.__min+c*(this.__max-this.__min)/100,"number"==typeof this.__step&&0!==c&&100!==c&&(b=this.__min+this.__step*+((b-this.__min)/this.__step).toFixed()),d!==b&&(c=100*(b-this.__min)/(this.__max-this.__min),this.value=b,this.__render(c),this.trigger("change",b))},h.__handleMouseDown=function(){h.__sliderMouseDown.call(this)},a.fn.manSlider=function(b){var c=[],b=a.extend({},a.fn.manSlider.defaults,b);return b.theme="string"==typeof b.theme?b.theme:a.fn.manSlider.defaults.theme,b.min="number"==typeof b.min?b.min:a.fn.manSlider.defaults.min,b.max="number"==typeof b.max?b.max:b.min+100,b.min>b.max&&(b.min=[b.max,b.max=b.min][0]),b.orientation=-1!==g(b.orientation,["horizontal","vertical"])?b.orientation:a.fn.manSlider.defaults.orientation,b.range=-1!==g(b.range,["min","max",!0])?b.range:void 0,b.step="number"==typeof b.step?Math.abs(b.step):void 0,b.value="number"==typeof b.value&&b.value>=b.min&&b.value<=b.max?b.value:b.min,this.each(function(){b.$view=a(this),c.push(new h(b))}),c.length>1?c:c[0]},a.fn.manSlider.defaults={orientation:"horizontal",min:0,max:100,value:0,theme:"white"}}(this.jQuery,this.LocalEvent);